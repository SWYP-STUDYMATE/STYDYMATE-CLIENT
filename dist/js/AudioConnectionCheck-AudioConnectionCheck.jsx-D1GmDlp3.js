import{b as e,z as s}from"./vendor-chunk-D6LsFSV7.js";import{C as t}from"./CommonButton-chunk-BGn4hO1n.js";import{f as a,s as r,t as c,u as n,W as i,l,m as d,L as o}from"./ui-vendor-chunk-CYPVLLJ1.js";import{u}from"./react-vendor-chunk-CMkIwBz9.js";function x(){const x=u(),[m,h]=e.useState("idle"),[f,p]=e.useState("idle"),[j,v]=e.useState("idle"),[b,w]=e.useState(0),[g,N]=e.useState(null),[y,k]=e.useState(!1),[T,C]=e.useState(null),R=e.useRef(null),S=e.useRef([]),A=e.useRef(null),L=e.useRef(null),M=e.useRef(null),B=e.useRef(null);e.useEffect(()=>()=>{B.current&&B.current.getTracks().forEach(e=>e.stop()),M.current&&cancelAnimationFrame(M.current),A.current&&A.current.close()},[]);const F=()=>{if(!L.current)return;const e=new Uint8Array(L.current.frequencyBinCount);L.current.getByteFrequencyData(e);const s=e.reduce((e,s)=>e+s)/e.length;w(Math.min(s/128,1)),M.current=requestAnimationFrame(F)},q=async()=>{await(async()=>{h("testing");try{const e=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}});B.current=e,A.current=new(window.AudioContext||window.webkitAudioContext),L.current=A.current.createAnalyser(),A.current.createMediaStreamSource(e).connect(L.current),L.current.fftSize=256;const s={mimeType:"audio/webm;codecs=opus"};MediaRecorder.isTypeSupported(s.mimeType)||(s.mimeType="audio/webm"),R.current=new MediaRecorder(e,s),S.current=[],R.current.ondataavailable=e=>{e.data.size>0&&S.current.push(e.data)},R.current.onstop=()=>{const e=new Blob(S.current,{type:"audio/webm"});C(e),k(!1);const s=URL.createObjectURL(e);new Audio(s).play().then(()=>{h("success")}).catch(()=>{h("failed")})},R.current.start(),k(!0),F(),setTimeout(()=>{R.current&&"recording"===R.current.state&&(R.current.stop(),e.getTracks().forEach(e=>e.stop()),M.current&&cancelAnimationFrame(M.current))},3e3)}catch(e){h("failed")}})(),setTimeout(()=>(async()=>{p("testing");try{const e=new(window.AudioContext||window.webkitAudioContext),s=e.createOscillator(),t=e.createGain();s.connect(t),t.connect(e.destination),s.frequency.value=440,t.gain.value=.3,s.start(),t.gain.exponentialRampToValueAtTime(.01,e.currentTime+.5),setTimeout(()=>{s.stop(),p("success")},500)}catch(e){p("failed")}})(),4e3),setTimeout(()=>(async()=>{v("testing");try{const e=Date.now(),s=await fetch("https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png",{cache:"no-cache"}),t=await s.blob(),a=(Date.now()-e)/1e3,r=t.size/1048576*8/a;N(r),v(r>=1?"success":"failed")}catch(e){v("failed")}})(),5e3)},z=e=>{switch(e){case"idle":default:return null;case"testing":return s.jsx(o,{className:"w-5 h-5 animate-spin text-[var(--blue)]"});case"success":return s.jsx(d,{className:"w-5 h-5 text-[var(--green-500)]"});case"failed":return s.jsx(l,{className:"w-5 h-5 text-[var(--red)]"})}},D="success"===m&&"success"===f&&"success"===j;return s.jsx("div",{className:"min-h-screen page-bg flex flex-col",children:s.jsxs("div",{className:"max-w-[768px] w-full mx-auto flex flex-col min-h-screen",children:[s.jsx("div",{className:"px-6 py-4 bg-white border-b border-[var(--black-50)]",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:()=>x(-1),className:"p-2 -ml-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:s.jsx("path",{d:"M15 18L9 12L15 6",stroke:"#111111",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),s.jsx("h1",{className:"text-[18px] font-bold text-[var(--black-500)]",children:"ìŒì„± ì„¸ì…˜ ì—°ê²° í™•ì¸"}),s.jsx("div",{className:"w-10"})]})}),s.jsxs("div",{className:"flex-1 px-6 py-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h2",{className:"text-[24px] font-bold text-[var(--black-500)] mb-2",children:"ì„¸ì…˜ ì‹œìž‘ ì „ í™•ì¸ì‚¬í•­"}),s.jsx("p",{className:"text-[16px] text-[var(--black-300)]",children:"ì›í™œí•œ ìŒì„± í†µí™”ë¥¼ ìœ„í•´ ë””ë°”ì´ìŠ¤ë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤"})]}),s.jsxs("div",{className:"space-y-4 mb-8",children:[s.jsxs("div",{className:"bg-white rounded-[10px] p-6 border border-[var(--black-50)]",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-12 h-12 bg-[rgba(0,196,113,0.12)] rounded-full flex items-center justify-center mr-4",children:y?s.jsx(a,{className:"w-6 h-6 text-[var(--green-500)]"}):s.jsx(r,{className:"w-6 h-6 text-[var(--green-500)]"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[16px] font-medium text-[#111111]",children:"ë§ˆì´í¬ í…ŒìŠ¤íŠ¸"}),s.jsxs("p",{className:"text-[14px] text-[var(--black-200)]",children:["idle"===m&&"í…ŒìŠ¤íŠ¸ë¥¼ ì‹œìž‘í•˜ì„¸ìš”","testing"===m&&"3ì´ˆê°„ ë§ì”€í•´ì£¼ì„¸ìš”...","success"===m&&"ì •ìƒ ìž‘ë™","failed"===m&&"ë§ˆì´í¬ë¥¼ í™•ì¸í•˜ì„¸ìš”"]})]})]}),z(m)]}),y&&s.jsx("div",{className:"mt-4",children:s.jsx("div",{className:"h-2 bg-[var(--black-50)] rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-[var(--green-500)] transition-all duration-100",style:{width:100*b+"%"}})})})]}),s.jsx("div",{className:"bg-white rounded-[10px] p-6 border border-[var(--black-50)]",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-12 h-12 bg-[rgba(66,133,244,0.12)] rounded-full flex items-center justify-center mr-4",children:s.jsx(c,{className:"w-6 h-6 text-[var(--blue)]"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[16px] font-medium text-[#111111]",children:"ìŠ¤í”¼ì»¤ í…ŒìŠ¤íŠ¸"}),s.jsxs("p",{className:"text-[14px] text-[var(--black-200)]",children:["idle"===f&&"í…ŒìŠ¤íŠ¸ë¥¼ ì‹œìž‘í•˜ì„¸ìš”","testing"===f&&"í…ŒìŠ¤íŠ¸ ìŒì´ ìž¬ìƒë©ë‹ˆë‹¤...","success"===f&&"ì •ìƒ ìž‘ë™","failed"===f&&"ìŠ¤í”¼ì»¤ë¥¼ í™•ì¸í•˜ì„¸ìš”"]})]})]}),z(f)]})}),s.jsx("div",{className:"bg-white rounded-[10px] p-6 border border-[var(--black-50)]",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-12 h-12 bg-[rgba(255,165,0,0.12)] rounded-full flex items-center justify-center mr-4",children:"failed"===j?s.jsx(n,{className:"w-6 h-6 text-[var(--warning-yellow)]"}):s.jsx(i,{className:"w-6 h-6 text-[var(--warning-yellow)]"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[16px] font-medium text-[#111111]",children:"ì¸í„°ë„· ì—°ê²°"}),s.jsxs("p",{className:"text-[14px] text-[var(--black-200)]",children:["idle"===j&&"í…ŒìŠ¤íŠ¸ë¥¼ ì‹œìž‘í•˜ì„¸ìš”","testing"===j&&"ì—°ê²° ì†ë„ ì¸¡ì • ì¤‘...","success"===j&&`ì—°ê²° ì–‘í˜¸ (${g?.toFixed(1)} Mbps)`,"failed"===j&&"ì—°ê²°ì´ ë¶ˆì•ˆì •í•©ë‹ˆë‹¤"]})]})]}),z(j)]})})]}),s.jsx("div",{className:"bg-[var(--neutral-100)] rounded-[10px] p-4 mb-8",children:s.jsx("p",{className:"text-[14px] text-[var(--black-300)]",children:"ðŸ’¡ ëª¨ë“  í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•´ì•¼ ì›í™œí•œ ìŒì„± í†µí™”ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë¬¸ì œê°€ ìžˆë‹¤ë©´ ë””ë°”ì´ìŠ¤ ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”."})})]}),s.jsx("div",{className:"px-6 pb-8",children:"idle"===m&&"idle"===f&&"idle"===j?s.jsx(t,{onClick:q,className:"w-full",variant:"primary",children:"ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹œìž‘"}):D?s.jsx(t,{onClick:()=>x("/session/audio-room"),className:"w-full",variant:"success",children:"ì„¸ì…˜ ì‹œìž‘í•˜ê¸°"}):s.jsxs("div",{className:"space-y-3",children:[s.jsx(t,{onClick:q,className:"w-full",variant:"secondary",children:"ë‹¤ì‹œ í…ŒìŠ¤íŠ¸"}),("testing"===m||"testing"===f||"testing"===j)&&s.jsx("p",{className:"text-center text-[14px] text-[var(--black-200)]",children:"í…ŒìŠ¤íŠ¸ ì§„í–‰ ì¤‘..."})]})})]})})}export{x as default};
