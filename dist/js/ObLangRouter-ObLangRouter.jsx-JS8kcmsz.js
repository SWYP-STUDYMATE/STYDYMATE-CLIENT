import{b as e,z as a}from"./vendor-chunk-D6LsFSV7.js";import{b as l,a as s,H as t,u as n}from"../assets/index-Cy6KDqhv.js";import{P as g}from"./PrograssBar-chunk-CxvE9X8I.js";import{C as x}from"./CommonButton-chunk-BGn4hO1n.js";import{S as o}from"./ui-vendor-chunk-CYPVLLJ1.js";import{c as u}from"./SelectStyles-chunk-CfjdFBjk.js";import{u as c,e as i}from"./react-vendor-chunk-CMkIwBz9.js";import{C as d}from"./CompleteOnboarding-chunk-DyWJUXgc.js";import"./utils-vendor-chunk-Clitctyl.js";function m(){const[n,i]=e.useState([]),[d,m]=e.useState(null),p=l(e=>e.setNativeLanguage),r=c();e.useEffect(()=>{s.get("/onboard/language/languages").then(e=>{const a=(e.data||[]).map(e=>({value:e.languageId,label:e.languageName}));i(a)}).catch(e=>{alert("언어 리스트를 불러오지 못했습니다.")})},[]);const h=!!d;return a.jsxs("div",{className:"bg-[#FFFFFF] h-screen w-[768px] mx-auto",children:[a.jsx(t,{}),a.jsx(g,{total:4,value:1,className:"mt-[19px]"}),a.jsx("div",{className:"mx-auto mt-[19px] w-[720px]",children:a.jsx("h1",{className:"text-[32px] font-bold leading-[42px] text-[#111111]",children:"모국어를 선택해주세요."})}),a.jsxs("div",{className:"mx-auto mt-[32px] w-[720px]",children:[a.jsx("label",{className:"block text-[16px] font-medium leading-[24px] text-[#343a40] mb-[8px]",children:"모국어 선택"}),a.jsx(o,{options:n,value:d,onChange:m,placeholder:"모국어를 선택해주세요",className:"mb-[576px]",styles:u,isSearchable:!1}),a.jsx(x,{text:"다음",disabled:!h,onClick:async()=>{if(window.confirm(`선택한 언어가 "${d?.label}" 맞습니까?`))try{await s.post("/onboard/language/native-language",{languageId:d.value}),p(d?.label||""),r("/onboarding-lang/2")}catch(e){alert("모국어 저장에 실패했습니다.")}}})]})]})}function p(){const n=c(),i=l(e=>e.setOtherLanguages),[d,m]=e.useState([{language:null,level:null}]),[p,r]=e.useState([]),[h,v]=e.useState([]),[b,j]=e.useState(!0),[f,N]=e.useState(!0);e.useEffect(()=>{j(!0),s.get("/onboard/language/languages").then(e=>{const a=(e.data||[]).map(e=>({value:e.languageId,label:e.languageName}));r(a),j(!1)}).catch(e=>{alert("언어 리스트를 불러오지 못했습니다."),j(!1)}),N(!0),s.get("/onboard/language/level-types-language").then(e=>{const a=(e.data||[]).map(e=>({value:e.langLevelId,label:e.LangLevelName}));v(a),N(!1)}).catch(e=>{alert("레벨 리스트를 불러오지 못했습니다."),N(!1)})},[]);const w=d.filter(e=>e.language&&e.level),y=w.length>0,F=(e,a,l)=>{const s=d.map((s,t)=>t===e?{...s,[a]:l}:s);e===d.length-1&&"level"===a&&l&&s[e].language&&s.push({language:null,level:null}),m(s)};return a.jsxs("div",{className:"relative bg-[#FFFFFF] min-h-screen w-[768px] mx-auto",children:[a.jsx(t,{}),a.jsx(g,{total:5,value:2,className:"mt-[19px]"}),a.jsx("div",{className:"mx-auto mt-[19px] w-[720px]",children:a.jsx("h1",{className:"text-[32px] font-bold leading-[42px] text-[#111111]",children:"모국어 외에 할 줄 아는 언어와 레벨을 선택해 주세요."})}),a.jsxs("div",{className:"mx-auto mt-[32px] w-[720px] flex flex-col gap-4 min-h-[620px] pb-[80px]",children:[a.jsxs("div",{className:"flex gap-4",children:[a.jsx("label",{className:"block text-[16px] font-medium leading-[24px] text-[#343a40] mb-[8px] w-[300px]",children:"사용하는 언어 (복수 선택 가능)"}),a.jsx("label",{className:"block text-[16px] font-medium leading-[24px] text-[#343a40] mb-[8px] w-[400px]",children:"레벨"})]}),d.map((e,l)=>a.jsxs("div",{className:"flex gap-4 items-end",children:[a.jsx("div",{className:"w-[300px]",children:a.jsx(o,{options:p,value:e.language,onChange:e=>F(l,"language",e),placeholder:b?"로딩 중...":"언어를 선택해주세요",styles:u,isMulti:!1,isDisabled:b})}),a.jsx("div",{className:"w-[400px]",children:a.jsx(o,{options:h,value:e.level,onChange:e=>F(l,"level",e),placeholder:f?"로딩 중...":"현재 본인의 레벨을 선택해 주세요",styles:u,isMulti:!1,isDisabled:f||!e.language})})]},l))]}),a.jsx("div",{className:"mx-auto w-[720px] mt-10",children:a.jsx(x,{text:"다음",disabled:!y,onClick:async()=>{i(w);const e={languages:w.map(e=>({languageId:e.language.value,langLevelTypeId:e.level.value}))};try{await s.post("/onboard/language/language-level",e),n("/onboarding-lang/3")}catch(a){alert("데이터 전송에 실패했습니다. 다시 시도해주세요.")}}})})]})}function r(){const n=c(),i=l(e=>e.setWantedLanguages),[d,m]=e.useState([{language:null,level:null}]),[p,r]=e.useState([]),[h,v]=e.useState([]),[b,j]=e.useState(!0),[f,N]=e.useState(!0);e.useEffect(()=>{j(!0),s.get("/onboard/language/languages").then(e=>{const a=(e.data||[]).map(e=>({value:e.languageId,label:e.languageName}));r(a),j(!1)}).catch(e=>{alert("언어 리스트를 불러오지 못했습니다."),j(!1)}),N(!0),s.get("/onboard/language/level-types-partner").then(e=>{const a=(e.data||[]).map(e=>({value:e.langLevelId,label:e.LangLevelName}));v(a),N(!1)}).catch(e=>{alert("파트너 레벨 리스트를 불러오지 못했습니다."),N(!1)})},[]);const w=d.filter(e=>e.language&&e.level),y=w.length>0,F=(e,a,l)=>{const s=d.map((s,t)=>t===e?{...s,[a]:l}:s);e===d.length-1&&"level"===a&&l&&s[e].language&&s.push({language:null,level:null}),m(s)};return a.jsxs("div",{className:"relative bg-[#FFFFFF] min-h-screen w-[768px] mx-auto",children:[a.jsx(t,{}),a.jsx(g,{total:5,value:3,className:"mt-[19px]"}),a.jsx("div",{className:"mx-auto mt-[19px] w-[720px]",children:a.jsx("h1",{className:"text-[32px] font-bold leading-[42px] text-[#111111]",children:"배우고 싶은 언어와 원하는 파트너 레벨을 선택해 주세요."})}),a.jsxs("div",{className:"mx-auto mt-[32px] w-[720px] flex flex-col gap-4 min-h-[620px] pb-[80px]",children:[a.jsxs("div",{className:"flex gap-4",children:[a.jsx("label",{className:"block text-[16px] font-medium leading-[24px] text-[#343a40] mb-[8px] w-[300px]",children:"배우고 싶은 언어 (복수 선택 가능)"}),a.jsx("label",{className:"block text-[16px] font-medium leading-[24px] text-[#343a40] mb-[8px] w-[400px]",children:"파트너 레벨"})]}),d.map((e,l)=>a.jsxs("div",{className:"flex gap-4 items-end",children:[a.jsx("div",{className:"w-[300px]",children:a.jsx(o,{options:p,value:e.language,onChange:e=>F(l,"language",e),placeholder:b?"로딩 중...":"언어를 선택해주세요",styles:u,isMulti:!1,isDisabled:b})}),a.jsx("div",{className:"w-[400px]",children:a.jsx(o,{options:h,value:e.level,onChange:e=>F(l,"level",e),placeholder:f?"로딩 중...":"파트너 레벨을 선택해주세요",styles:u,isMulti:!1,isDisabled:f||!e.language})})]},l))]}),a.jsx("div",{className:"mx-auto w-[720px] mt-10",children:a.jsx(x,{text:"다음",disabled:!y,onClick:async()=>{i&&i(w);const e={languages:[...l.getState().otherLanguages.map(e=>({languageId:e.language.value,langLevelTypeId:e.level.value})),...w.map(e=>({languageId:e.language.value,langLevelTypeId:e.level.value}))]};try{await s.post("/onboard/language/language-level",e),n("/onboarding-lang/complete")}catch(a){alert("데이터 전송에 실패했습니다. 다시 시도해주세요.")}}})})]})}function h(){const e=c();l(e=>e.wantedLanguages);const s=n(e=>e.name)||"회원";return a.jsx(d,{userName:s,onboarding:"언어 설정",subText:"두 번째 단계",step:2,totalSteps:5,onNext:()=>e("/onboarding-int/1")})}function v(){const{step:e}=i();return"1"===e?a.jsx(m,{}):"2"===e?a.jsx(p,{}):"3"===e?a.jsx(r,{}):"complete"===e?a.jsx(h,{}):a.jsx("div",{children:"잘못된 접근입니다."})}export{v as default};
