import{b as e,z as s}from"./vendor-chunk-3fnplnT6.js";import{C as t}from"./CommonButton-chunk-BpPP3d6j.js";import{f as c,s as n,t as a,u as r,W as i,l,m as d,L as o}from"./ui-vendor-chunk-DkBAET_w.js";import{u}from"./react-vendor-chunk-COHvxYfz.js";function x(){const x=u(),[m,h]=e.useState("idle"),[f,p]=e.useState("idle"),[j,w]=e.useState("idle"),[N,b]=e.useState(0),[g,v]=e.useState(null),[y,F]=e.useState(!1),[E,A]=e.useState(null),k=e.useRef(null),C=e.useRef([]),T=e.useRef(null),R=e.useRef(null),S=e.useRef(null),L=e.useRef(null);e.useEffect(()=>()=>{L.current&&L.current.getTracks().forEach(e=>e.stop()),S.current&&cancelAnimationFrame(S.current),T.current&&T.current.close()},[]);const M=()=>{if(!R.current)return;const e=new Uint8Array(R.current.frequencyBinCount);R.current.getByteFrequencyData(e);const s=e.reduce((e,s)=>e+s)/e.length;b(Math.min(s/128,1)),S.current=requestAnimationFrame(M)},B=async()=>{await(async()=>{h("testing");try{const e=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}});L.current=e,T.current=new(window.AudioContext||window.webkitAudioContext),R.current=T.current.createAnalyser(),T.current.createMediaStreamSource(e).connect(R.current),R.current.fftSize=256;const s={mimeType:"audio/webm;codecs=opus"};MediaRecorder.isTypeSupported(s.mimeType)||(s.mimeType="audio/webm"),k.current=new MediaRecorder(e,s),C.current=[],k.current.ondataavailable=e=>{e.data.size>0&&C.current.push(e.data)},k.current.onstop=()=>{const e=new Blob(C.current,{type:"audio/webm"});A(e),F(!1);const s=URL.createObjectURL(e);new Audio(s).play().then(()=>{h("success")}).catch(()=>{h("failed")})},k.current.start(),F(!0),M(),setTimeout(()=>{k.current&&"recording"===k.current.state&&(k.current.stop(),e.getTracks().forEach(e=>e.stop()),S.current&&cancelAnimationFrame(S.current))},3e3)}catch(e){h("failed")}})(),setTimeout(()=>(async()=>{p("testing");try{const e=new(window.AudioContext||window.webkitAudioContext),s=e.createOscillator(),t=e.createGain();s.connect(t),t.connect(e.destination),s.frequency.value=440,t.gain.value=.3,s.start(),t.gain.exponentialRampToValueAtTime(.01,e.currentTime+.5),setTimeout(()=>{s.stop(),p("success")},500)}catch(e){p("failed")}})(),4e3),setTimeout(()=>(async()=>{w("testing");try{const e=Date.now(),s=await fetch("https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png",{cache:"no-cache"}),t=await s.blob(),c=(Date.now()-e)/1e3,n=t.size/1048576*8/c;v(n),w(n>=1?"success":"failed")}catch(e){w("failed")}})(),5e3)},D=e=>{switch(e){case"idle":default:return null;case"testing":return s.jsx(o,{className:"w-5 h-5 animate-spin text-[#4285F4]"});case"success":return s.jsx(d,{className:"w-5 h-5 text-[#00C471]"});case"failed":return s.jsx(l,{className:"w-5 h-5 text-[#EA4335]"})}},q="success"===m&&"success"===f&&"success"===j;return s.jsx("div",{className:"min-h-screen bg-[#FAFAFA] flex flex-col",children:s.jsxs("div",{className:"max-w-[768px] w-full mx-auto flex flex-col min-h-screen",children:[s.jsx("div",{className:"px-6 py-4 bg-white border-b border-[#E7E7E7]",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:()=>x(-1),className:"p-2 -ml-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:s.jsx("path",{d:"M15 18L9 12L15 6",stroke:"#111111",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),s.jsx("h1",{className:"text-[18px] font-bold text-[#111111]",children:"ìŒì„± ì„¸ì…˜ ì—°ê²° í™•ì¸"}),s.jsx("div",{className:"w-10"})]})}),s.jsxs("div",{className:"flex-1 px-6 py-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h2",{className:"text-[24px] font-bold text-[#111111] mb-2",children:"ì„¸ì…˜ ì‹œìž‘ ì „ í™•ì¸ì‚¬í•­"}),s.jsx("p",{className:"text-[16px] text-[#606060]",children:"ì›í™œí•œ ìŒì„± í†µí™”ë¥¼ ìœ„í•´ ë””ë°”ì´ìŠ¤ë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤"})]}),s.jsxs("div",{className:"space-y-4 mb-8",children:[s.jsxs("div",{className:"bg-white rounded-[10px] p-6 border border-[#E7E7E7]",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-12 h-12 bg-[#E6F9F1] rounded-full flex items-center justify-center mr-4",children:y?s.jsx(c,{className:"w-6 h-6 text-[#00C471]"}):s.jsx(n,{className:"w-6 h-6 text-[#00C471]"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[16px] font-medium text-[#111111]",children:"ë§ˆì´í¬ í…ŒìŠ¤íŠ¸"}),s.jsxs("p",{className:"text-[14px] text-[#929292]",children:["idle"===m&&"í…ŒìŠ¤íŠ¸ë¥¼ ì‹œìž‘í•˜ì„¸ìš”","testing"===m&&"3ì´ˆê°„ ë§ì”€í•´ì£¼ì„¸ìš”...","success"===m&&"ì •ìƒ ìž‘ë™","failed"===m&&"ë§ˆì´í¬ë¥¼ í™•ì¸í•˜ì„¸ìš”"]})]})]}),D(m)]}),y&&s.jsx("div",{className:"mt-4",children:s.jsx("div",{className:"h-2 bg-[#E7E7E7] rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-[#00C471] transition-all duration-100",style:{width:100*N+"%"}})})})]}),s.jsx("div",{className:"bg-white rounded-[10px] p-6 border border-[#E7E7E7]",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-12 h-12 bg-[#E8F4FD] rounded-full flex items-center justify-center mr-4",children:s.jsx(a,{className:"w-6 h-6 text-[#4285F4]"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[16px] font-medium text-[#111111]",children:"ìŠ¤í”¼ì»¤ í…ŒìŠ¤íŠ¸"}),s.jsxs("p",{className:"text-[14px] text-[#929292]",children:["idle"===f&&"í…ŒìŠ¤íŠ¸ë¥¼ ì‹œìž‘í•˜ì„¸ìš”","testing"===f&&"í…ŒìŠ¤íŠ¸ ìŒì´ ìž¬ìƒë©ë‹ˆë‹¤...","success"===f&&"ì •ìƒ ìž‘ë™","failed"===f&&"ìŠ¤í”¼ì»¤ë¥¼ í™•ì¸í•˜ì„¸ìš”"]})]})]}),D(f)]})}),s.jsx("div",{className:"bg-white rounded-[10px] p-6 border border-[#E7E7E7]",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-12 h-12 bg-[#FFF5E6] rounded-full flex items-center justify-center mr-4",children:"failed"===j?s.jsx(r,{className:"w-6 h-6 text-[#FFA500]"}):s.jsx(i,{className:"w-6 h-6 text-[#FFA500]"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[16px] font-medium text-[#111111]",children:"ì¸í„°ë„· ì—°ê²°"}),s.jsxs("p",{className:"text-[14px] text-[#929292]",children:["idle"===j&&"í…ŒìŠ¤íŠ¸ë¥¼ ì‹œìž‘í•˜ì„¸ìš”","testing"===j&&"ì—°ê²° ì†ë„ ì¸¡ì • ì¤‘...","success"===j&&`ì—°ê²° ì–‘í˜¸ (${g?.toFixed(1)} Mbps)`,"failed"===j&&"ì—°ê²°ì´ ë¶ˆì•ˆì •í•©ë‹ˆë‹¤"]})]})]}),D(j)]})})]}),s.jsx("div",{className:"bg-[#F8F9FA] rounded-[10px] p-4 mb-8",children:s.jsx("p",{className:"text-[14px] text-[#606060]",children:"ðŸ’¡ ëª¨ë“  í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•´ì•¼ ì›í™œí•œ ìŒì„± í†µí™”ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë¬¸ì œê°€ ìžˆë‹¤ë©´ ë””ë°”ì´ìŠ¤ ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”."})})]}),s.jsx("div",{className:"px-6 pb-8",children:"idle"===m&&"idle"===f&&"idle"===j?s.jsx(t,{onClick:B,className:"w-full",variant:"primary",children:"ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹œìž‘"}):q?s.jsx(t,{onClick:()=>x("/session/audio-room"),className:"w-full",variant:"success",children:"ì„¸ì…˜ ì‹œìž‘í•˜ê¸°"}):s.jsxs("div",{className:"space-y-3",children:[s.jsx(t,{onClick:B,className:"w-full",variant:"secondary",children:"ë‹¤ì‹œ í…ŒìŠ¤íŠ¸"}),("testing"===m||"testing"===f||"testing"===j)&&s.jsx("p",{className:"text-center text-[14px] text-[#929292]",children:"í…ŒìŠ¤íŠ¸ ì§„í–‰ ì¤‘..."})]})})]})})}export{x as default};
