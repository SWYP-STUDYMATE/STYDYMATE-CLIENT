import{b as e,z as s,A as t,B as l,P as a,C as r,D as n,E as i,T as c}from"./vendor-chunk-D6LsFSV7.js";import{u as x}from"./levelTestStore-chunk-B4uhrPXk.js";import{C as d}from"./CommonButton-chunk-BGn4hO1n.js";import{T as o,r as m,B as h,U as p,C as u,q as j}from"./ui-vendor-chunk-CYPVLLJ1.js";import{u as f}from"./react-vendor-chunk-CMkIwBz9.js";import"./utils-vendor-chunk-Clitctyl.js";const b=[{name:"Grammar",fullName:"ë¬¸ë²•"},{name:"Vocabulary",fullName:"ì–´íœ˜"},{name:"Pronunciation",fullName:"ë°œìŒ"},{name:"Fluency",fullName:"ìœ ì°½ì„±"},{name:"Comprehension",fullName:"ì´í•´ë ¥"},{name:"Confidence",fullName:"ìžì‹ ê°"}];function N({scores:x={},animate:d=!0}){const[o,m]=e.useState(b.map(e=>({skill:e.name,skillKr:e.fullName,score:0,fullMark:100})));e.useEffect(()=>{if(!d)return void m(b.map(e=>({skill:e.name,skillKr:e.fullName,score:x[e.name.toLowerCase()]||0,fullMark:100})));const e=b.map(e=>({skill:e.name,skillKr:e.fullName,score:x[e.name.toLowerCase()]||0,fullMark:100}));let s=0;const t=setInterval(()=>{s++;const l=s/93.75,a=1-Math.pow(1-l,3);m(e.map((e,s)=>({...e,score:Math.round(e.score*a)}))),s>=93.75&&clearInterval(t)},16);return()=>clearInterval(t)},[x,d]);const h=({active:e,payload:t})=>{if(e&&t&&t[0]){const e=t[0].payload;return s.jsxs("div",{className:"bg-white px-4 py-2 rounded-lg shadow-lg border border-[#E7E7E7]",children:[s.jsxs("p",{className:"text-[14px] font-semibold text-[#111111]",children:[e.skillKr," (",e.skill,")"]}),s.jsxs("p",{className:"text-[14px] text-[#00C471]",children:["ì ìˆ˜: ",e.score,"ì "]})]})}return null},p=Math.round(Object.values(x).reduce((e,s)=>e+(s||0),0)/Object.values(x).filter(e=>void 0!==e).length||0);return s.jsxs("div",{className:"relative w-full h-full min-h-[300px]",children:[s.jsx(t,{width:"100%",height:"100%",children:s.jsxs(l,{data:o,children:[s.jsx(a,{gridType:"polygon",radialLines:!1,stroke:"#E7E7E7",strokeWidth:1}),s.jsx(r,{dataKey:"skill",tick:{fill:"#666666",fontSize:14,fontWeight:500},className:"select-none"}),s.jsx(n,{angle:90,domain:[0,100],tickCount:6,tick:{fill:"#929292",fontSize:12},axisLine:!1}),s.jsx(i,{name:"Skills",dataKey:"score",stroke:"#00C471",strokeWidth:2,fill:"#00C471",fillOpacity:.3,animationDuration:d?1500:0,animationEasing:"ease-out"}),s.jsx(c,{content:s.jsx(h,{})})]})}),s.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center pointer-events-none",children:s.jsxs("div",{className:"bg-white/90 rounded-full px-4 py-2",children:[s.jsx("p",{className:"text-[12px] text-[#666666]",children:"í‰ê· "}),s.jsx("p",{className:"text-[24px] font-bold text-[#00C471]",children:p})]})})]})}const v={A1:{title:"Beginner",description:"ê¸°ì´ˆì ì¸ í‘œí˜„ê³¼ ê°„ë‹¨í•œ ë¬¸ìž¥ì„ ì´í•´í•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.",color:"bg-blue-500"},A2:{title:"Elementary",description:"ì¼ìƒì ì¸ í‘œí˜„ê³¼ ê¸°ë³¸ì ì¸ êµ¬ë¬¸ì„ ì´í•´í•˜ê³  ê°„ë‹¨í•œ ì˜ì‚¬ì†Œí†µì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.",color:"bg-green-500"},B1:{title:"Intermediate",description:"ì¼ìƒìƒí™œ, ì—¬í–‰, ê´€ì‹¬ì‚¬ì— ëŒ€í•´ ìžìœ ë¡­ê²Œ ëŒ€í™”í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.",color:"bg-yellow-500"},B2:{title:"Upper Intermediate",description:"ë³µìž¡í•œ ì£¼ì œì— ëŒ€í•´ ëª…í™•í•˜ê³  ìƒì„¸í•˜ê²Œ ì˜ê²¬ì„ í‘œí˜„í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.",color:"bg-orange-500"},C1:{title:"Advanced",description:"ë‹¤ì–‘í•œ ì£¼ì œì— ëŒ€í•´ ìœ ì°½í•˜ê³  ìžë°œì ìœ¼ë¡œ í‘œí˜„í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.",color:"bg-red-500"},C2:{title:"Proficient",description:"ì›ì–´ë¯¼ ìˆ˜ì¤€ìœ¼ë¡œ ëª¨ë“  ìƒí™©ì—ì„œ ìžìœ ë¡­ê²Œ ì˜ì‚¬ì†Œí†µì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.",color:"bg-purple-500"}};function g(){const t=f(),[l,a]=e.useState(!0),[r,n]=e.useState(null),i=x(e=>e.testResult),c=x(e=>e.resetTest),b=localStorage.getItem("userId");e.useEffect(()=>{if(i)return n(i),void a(!1);b?g():t("/level-test")},[i,b]);const g=async()=>{try{const e=await fetch(`/api/level-test/result/${b}`);if(!e.ok)throw new Error("Result not found");const s=await e.json();n(s),x.getState().setTestResult(s)}catch(e){t("/level-test")}finally{a(!1)}};if(l)return s.jsx("div",{className:"min-h-screen bg-[#FAFAFA] flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#00C471] mx-auto mb-4"}),s.jsx("p",{className:"text-[16px] text-[#666666]",children:"ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})]})});if(!r)return null;const k=v[r.level]||v.B1,y=r.scores||r.analysis?.scores||{};return s.jsxs("div",{className:"min-h-screen bg-[#FAFAFA]",children:[s.jsx("div",{className:"bg-white border-b border-[#E7E7E7] px-6 py-4",children:s.jsx("h1",{className:"text-[20px] font-bold text-[#111111] text-center",children:"ë ˆë²¨ í…ŒìŠ¤íŠ¸ ê²°ê³¼"})}),s.jsxs("div",{className:"px-6 py-8 max-w-lg mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:`inline-flex items-center justify-center w-24 h-24 rounded-full ${k.color} text-white mb-4`,children:s.jsx(o,{className:"w-12 h-12"})}),s.jsx("h2",{className:"text-[32px] font-bold text-[#111111] mb-2",children:r.level}),s.jsx("p",{className:"text-[18px] font-semibold text-[#666666] mb-2",children:k.title}),s.jsx("p",{className:"text-[14px] text-[#929292]",children:k.description})]}),s.jsxs("div",{className:"bg-white rounded-[20px] p-6 border border-[#E7E7E7] mb-6",children:[s.jsx("h3",{className:"text-[18px] font-bold text-[#111111] mb-4",children:"ìƒì„¸ ë¶„ì„ ê²°ê³¼"}),s.jsx("div",{className:"h-[300px]",children:s.jsx(N,{scores:y,animate:!0})})]}),s.jsxs("div",{className:"bg-white rounded-[20px] p-6 border border-[#E7E7E7] mb-6",children:[s.jsx("h3",{className:"text-[18px] font-bold text-[#111111] mb-4",children:"ì˜ì—­ë³„ ì ìˆ˜"}),s.jsx("div",{className:"space-y-3",children:Object.entries(y).map(([e,t])=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-[16px] text-[#666666] capitalize",children:["grammar"===e&&"ë¬¸ë²• (Grammar)","vocabulary"===e&&"ì–´íœ˜ (Vocabulary)","pronunciation"===e&&"ë°œìŒ (Pronunciation)","fluency"===e&&"ìœ ì°½ì„± (Fluency)","coherence"===e&&"ì¼ê´€ì„± (Coherence)","interaction"===e&&"ìƒí˜¸ìž‘ìš© (Interaction)","comprehension"===e&&"ì´í•´ë ¥ (Comprehension)","confidence"===e&&"ìžì‹ ê° (Confidence)"]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-32 h-2 bg-[#E7E7E7] rounded-full mr-3",children:s.jsx("div",{className:"h-full bg-[#00C471] rounded-full transition-all duration-1000",style:{width:`${t}%`}})}),s.jsx("span",{className:"text-[16px] font-semibold text-[#111111] w-12 text-right",children:t})]})]},e))})]}),(r.feedback||r.analysis?.feedback)&&s.jsxs("div",{className:"bg-white rounded-[20px] p-6 border border-[#E7E7E7] mb-6",children:[s.jsx("h3",{className:"text-[18px] font-bold text-[#111111] mb-4",children:"AI í”¼ë“œë°±"}),s.jsx("p",{className:"text-[14px] text-[#666666] leading-relaxed",children:r.feedback||r.analysis.feedback})]}),(r.strengths||r.improvements)&&s.jsxs("div",{className:"bg-white rounded-[20px] p-6 border border-[#E7E7E7] mb-6",children:[r.strengths&&r.strengths.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"text-[16px] font-semibold text-[#111111] mb-2",children:"ðŸŒŸ ê°•ì "}),s.jsx("ul",{className:"space-y-1",children:r.strengths.map((e,t)=>s.jsxs("li",{className:"text-[14px] text-[#666666] flex items-start",children:[s.jsx("span",{className:"text-[#00C471] mr-2",children:"â€¢"}),e]},t))})]}),r.improvements&&r.improvements.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-[16px] font-semibold text-[#111111] mb-2",children:"ðŸ’ª ê°œì„ ì "}),s.jsx("ul",{className:"space-y-1",children:r.improvements.map((e,t)=>s.jsxs("li",{className:"text-[14px] text-[#666666] flex items-start",children:[s.jsx("span",{className:"text-[#FF6B6B] mr-2",children:"â€¢"}),e]},t))})]})]}),s.jsxs("div",{className:"bg-white rounded-[20px] p-6 border border-[#E7E7E7] mb-8",children:[s.jsx("h3",{className:"text-[18px] font-bold text-[#111111] mb-4",children:"ì¶”ì²œ í•™ìŠµ ë°©ë²•"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx(m,{className:"w-5 h-5 text-[#00C471] mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[16px] font-semibold text-[#111111] mb-1",children:"ëª©í‘œ ì„¤ì •"}),s.jsxs("p",{className:"text-[14px] text-[#666666]",children:["í˜„ìž¬ ",r.level," ë ˆë²¨ì—ì„œ ë‹¤ìŒ ë ˆë²¨ë¡œ í–¥ìƒì„ ìœ„í•œ êµ¬ì²´ì ì¸ ëª©í‘œë¥¼ ì„¤ì •í•˜ì„¸ìš”."]})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx(h,{className:"w-5 h-5 text-[#00C471] mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[16px] font-semibold text-[#111111] mb-1",children:"ì§‘ì¤‘ í•™ìŠµ"}),s.jsx("p",{className:"text-[14px] text-[#666666]",children:"ê°€ìž¥ ë‚®ì€ ì ìˆ˜ë¥¼ ë°›ì€ ì˜ì—­ë¶€í„° ì§‘ì¤‘ì ìœ¼ë¡œ í•™ìŠµí•˜ì„¸ìš”."})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx(p,{className:"w-5 h-5 text-[#00C471] mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[16px] font-semibold text-[#111111] mb-1",children:"ëŒ€í™” ì—°ìŠµ"}),s.jsx("p",{className:"text-[14px] text-[#666666]",children:"ë¹„ìŠ·í•œ ë ˆë²¨ì˜ í•™ìŠµìžì™€ ì •ê¸°ì ìœ¼ë¡œ ëŒ€í™” ì—°ìŠµì„ í•˜ì„¸ìš”."})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx(u,{className:"w-5 h-5 text-[#00C471] mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[16px] font-semibold text-[#111111] mb-1",children:"ê¾¸ì¤€í•œ í•™ìŠµ"}),s.jsx("p",{className:"text-[14px] text-[#666666]",children:"ë§¤ì¼ 30ë¶„ì”© ê¾¸ì¤€ížˆ í•™ìŠµí•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤."})]})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs(d,{onClick:()=>{t("/main")},variant:"primary",className:"w-full",children:["í•™ìŠµ ì‹œìž‘í•˜ê¸°",s.jsx(j,{className:"w-5 h-5 ml-2"})]}),s.jsx(d,{onClick:()=>{c(),t("/level-test")},variant:"secondary",className:"w-full",children:"í…ŒìŠ¤íŠ¸ ë‹¤ì‹œ í•˜ê¸°"})]})]})]})}export{g as default};
