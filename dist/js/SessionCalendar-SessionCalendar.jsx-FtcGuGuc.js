import{b as e,z as s}from"./vendor-chunk-D6LsFSV7.js";import{C as t}from"./CommonButton-chunk-BGn4hO1n.js";import{u as a}from"./sessionStore-chunk-BSwnz1SH.js";import{P as r,p as n,q as l,C as c,V as i,f as d,U as o}from"./ui-vendor-chunk-CYPVLLJ1.js";import{u as x}from"./react-vendor-chunk-CMkIwBz9.js";import"./utils-vendor-chunk-Clitctyl.js";function m(){const m=x(),[h,p]=e.useState(new Date),[b,u]=e.useState(new Date),[v,g]=e.useState("month"),{sessions:j,upcomingSessions:N,loadUpcomingSessions:f,addSession:k}=a();e.useEffect(()=>{f()},[f]);const w=e=>j.filter(s=>{const t=new Date(s.date);return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}),D=e=>{const s=new Date(h);s.setMonth(h.getMonth()+e),p(s)},y=()=>{m("/session/schedule/new")},C=({session:e})=>{return s.jsxs("div",{className:"bg-white rounded-lg p-3 mb-2 border border-[var(--black-50)] \n      hover:shadow-md transition-shadow cursor-pointer",onClick:()=>m(`/session/${e.type}/${e.id}`),children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("img",{src:e.partnerImage,alt:e.partnerName,className:"w-8 h-8 rounded-full object-cover"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[12px] font-semibold text-[var(--black-500)]",children:e.partnerName}),s.jsxs("p",{className:"text-[10px] text-[var(--black-300)]",children:[(t=e.date,t.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1}))," • ",e.duration,"분"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:["video"===e.type?s.jsx(i,{className:"w-4 h-4 text-[var(--black-300)]"}):s.jsx(d,{className:"w-4 h-4 text-[var(--black-300)]"}),e.participants&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(o,{className:"w-3 h-3 text-[var(--black-300)]"}),s.jsx("span",{className:"text-[10px] text-[var(--black-300)]",children:e.participants})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full "+("completed"===e.status?"bg-[rgba(0,196,113,0.12)] text-[var(--green-700)]":"bg-[rgba(66,133,244,0.12)] text-[var(--blue)]"),children:"completed"===e.status?"완료":"예정"}),s.jsx("span",{className:"text-[10px] text-[var(--black-200)]",children:"en"===e.language?"English":"한국어"})]})]});var t},S=(e=>{const s=e.getFullYear(),t=e.getMonth(),a=new Date(s,t,1),r=new Date(s,t+1,0).getDate(),n=a.getDay(),l=[],c=new Date(s,t,0).getDate();for(let d=n-1;d>=0;d--)l.push({date:new Date(s,t-1,c-d),isCurrentMonth:!1});for(let d=1;d<=r;d++)l.push({date:new Date(s,t,d),isCurrentMonth:!0});const i=42-l.length;for(let d=1;d<=i;d++)l.push({date:new Date(s,t+1,d),isCurrentMonth:!1});return l})(h),M=w(b);return s.jsxs("div",{className:"min-h-screen page-bg",children:[s.jsx("div",{className:"bg-white border-b border-[#E7E7E7] px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-[20px] font-bold text-[#111111]",children:"세션 캘린더"}),s.jsxs(t,{onClick:y,variant:"primary",size:"small",children:[s.jsx(r,{className:"w-4 h-4 mr-1"}),"새 세션"]})]})}),s.jsx("div",{className:"max-w-7xl mx-auto p-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white rounded-[20px] p-6 border border-[var(--black-50)]",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-[18px] font-bold text-[var(--black-500)]",children:h.toLocaleDateString("ko-KR",{year:"numeric",month:"long"})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>D(-1),className:"p-2 hover:bg-[var(--neutral-100)] rounded-lg transition-colors",children:s.jsx(n,{className:"w-5 h-5 text-[#606060]"})}),s.jsx("button",{onClick:()=>p(new Date),className:"px-3 py-1 text-[14px] text-[var(--black-300)] hover:bg-[var(--neutral-100)] \n                    rounded-lg transition-colors",children:"오늘"}),s.jsx("button",{onClick:()=>D(1),className:"p-2 hover:bg-[var(--neutral-100)] rounded-lg transition-colors",children:s.jsx(l,{className:"w-5 h-5 text-[#606060]"})})]})]}),s.jsx("div",{className:"grid grid-cols-7 mb-2",children:["일","월","화","수","목","금","토"].map(e=>s.jsx("div",{className:"text-center py-2",children:s.jsx("span",{className:"text-[12px] font-medium text-[var(--black-200)]",children:e})},e))}),s.jsx("div",{className:"grid grid-cols-7 gap-1",children:S.map((e,t)=>{const a=e.date.toDateString()===(new Date).toDateString(),r=e.date.toDateString()===b.toDateString(),n=w(e.date);return s.jsxs("div",{onClick:()=>{return e.isCurrentMonth&&(s=e.date,void u(s));var s},className:`\n                        min-h-[80px] p-2 border border-[var(--black-50)] rounded-lg cursor-pointer\n                        transition-all duration-200\n                        ${e.isCurrentMonth?"bg-white":"page-bg text-[var(--black-200)]"}\n                        ${r?"ring-2 ring-[var(--green-500)]":""}\n                        ${e.isCurrentMonth?"hover:bg-[var(--neutral-100)]":""}\n                      `,children:[s.jsx("div",{className:"text-[14px] font-medium mb-1 "+(a?"text-[var(--green-500)]":e.isCurrentMonth?"text-[var(--black-500)]":""),children:e.date.getDate()}),n.length>0&&s.jsxs("div",{className:"space-y-1",children:[n.slice(0,2).map((e,t)=>s.jsx("div",{className:"h-1.5 rounded-full "+("completed"===e.status?"bg-[var(--green-500)]":"bg-[var(--blue)]")},t)),n.length>2&&s.jsxs("span",{className:"text-[10px] text-[var(--black-200)]",children:["+",n.length-2]})]})]},t)})})]})}),s.jsxs("div",{className:"lg:col-span-1",children:[s.jsxs("div",{className:"bg-white rounded-[20px] p-6 border border-[var(--black-50)]",children:[s.jsx("h3",{className:"text-[16px] font-bold text-[var(--black-500)] mb-4",children:b.toLocaleDateString("ko-KR",{month:"long",day:"numeric",weekday:"long"})}),M.length>0?s.jsx("div",{className:"space-y-2",children:M.map(e=>s.jsx(C,{session:e},e.id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(c,{className:"w-12 h-12 text-[var(--black-50)] mx-auto mb-3"}),s.jsx("p",{className:"text-[14px] text-[var(--black-200)] mb-4",children:"예정된 세션이 없습니다"}),s.jsx(t,{onClick:y,variant:"secondary",size:"small",children:"세션 예약하기"})]})]}),s.jsxs("div",{className:"bg-white rounded-[20px] p-6 border border-[var(--black-50)] mt-4",children:[s.jsx("h3",{className:"text-[16px] font-bold text-[var(--black-500)] mb-4",children:"이번 달 통계"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-[14px] text-[var(--black-300)]",children:"예정된 세션"}),s.jsx("span",{className:"text-[16px] font-semibold text-[var(--black-500)]",children:j.filter(e=>"scheduled"===e.status).length})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-[14px] text-[var(--black-300)]",children:"완료된 세션"}),s.jsx("span",{className:"text-[16px] font-semibold text-[var(--black-500)]",children:j.filter(e=>"completed"===e.status).length})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-[14px] text-[var(--black-300)]",children:"총 학습시간"}),s.jsxs("span",{className:"text-[16px] font-semibold text-[var(--black-500)]",children:[j.reduce((e,s)=>e+s.duration,0),"분"]})]})]})]})]})]})})]})}export{m as default};
