import{b as e,z as s}from"./vendor-chunk-3fnplnT6.js";import{C as t}from"./CommonButton-chunk-BpPP3d6j.js";import{A as c,D as i,F as a,f as l,t as n,u as r,W as d,v as o,l as x,m as u,L as m}from"./ui-vendor-chunk-DkBAET_w.js";import{u as h}from"./react-vendor-chunk-COHvxYfz.js";function j(){const j=h(),[f,v]=e.useState("idle"),[p,g]=e.useState("idle"),[b,N]=e.useState("idle"),[w,y]=e.useState("idle"),[E,F]=e.useState(0),[k,A]=e.useState(null),[C,S]=e.useState(""),[I,T]=e.useState(""),[D,M]=e.useState([]),[R,L]=e.useState([]),[q,B]=e.useState(!1),z=e.useRef(null),U=e.useRef(null),$=e.useRef(null),O=e.useRef(null),W=e.useRef(null);e.useEffect(()=>(navigator.mediaDevices.enumerateDevices().then(e=>{const s=e.filter(e=>"videoinput"===e.kind),t=e.filter(e=>"audioinput"===e.kind);M(s),L(t),s.length>0&&S(s[0].deviceId),t.length>0&&T(t[0].deviceId)}),()=>{U.current&&U.current.getTracks().forEach(e=>e.stop()),W.current&&cancelAnimationFrame(W.current),$.current&&$.current.close()}),[]);const _=()=>{if(!O.current)return;const e=new Uint8Array(O.current.frequencyBinCount);O.current.getByteFrequencyData(e);const s=e.reduce((e,s)=>e+s)/e.length;F(Math.min(s/128,1)),W.current=requestAnimationFrame(_)},G=async()=>{await(async()=>{v("testing");try{U.current&&U.current.getTracks().forEach(e=>e.stop());const e=await navigator.mediaDevices.getUserMedia({video:{deviceId:C?{exact:C}:void 0,width:{ideal:1280},height:{ideal:720}},audio:!1});U.current=e,z.current&&(z.current.srcObject=e),v("success")}catch(e){v("failed")}})(),setTimeout(()=>(async()=>{g("testing");try{const e=await navigator.mediaDevices.getUserMedia({audio:{deviceId:I?{exact:I}:void 0,echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}});$.current=new(window.AudioContext||window.webkitAudioContext),O.current=$.current.createAnalyser(),$.current.createMediaStreamSource(e).connect(O.current),O.current.fftSize=256,_(),setTimeout(()=>{e.getTracks().forEach(e=>e.stop()),W.current&&cancelAnimationFrame(W.current),F(0),g("success")},3e3)}catch(e){g("failed")}})(),1e3),setTimeout(()=>(async()=>{N("testing");try{const e=new(window.AudioContext||window.webkitAudioContext),s=e.createOscillator(),t=e.createGain();s.connect(t),t.connect(e.destination),s.frequency.value=440,t.gain.value=.3,s.start(),t.gain.exponentialRampToValueAtTime(.01,e.currentTime+.5),setTimeout(()=>{s.stop(),N("success")},500)}catch(e){N("failed")}})(),4500),setTimeout(()=>(async()=>{y("testing");try{const e=Date.now(),s=await fetch("https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png",{cache:"no-cache"}),t=await s.blob(),c=(Date.now()-e)/1e3,i=t.size/1048576*8/c;A(i),y(i>=2?"success":"failed")}catch(e){y("failed")}})(),5500)},P=e=>{switch(e){case"idle":default:return null;case"testing":return s.jsx(m,{className:"w-5 h-5 animate-spin text-[#4285F4]"});case"success":return s.jsx(u,{className:"w-5 h-5 text-[#00C471]"});case"failed":return s.jsx(x,{className:"w-5 h-5 text-[#EA4335]"})}},V="success"===f&&"success"===p&&"success"===b&&"success"===w;return s.jsx("div",{className:"min-h-screen bg-[#FAFAFA] flex flex-col",children:s.jsxs("div",{className:"max-w-[1024px] w-full mx-auto flex flex-col min-h-screen",children:[s.jsx("div",{className:"px-6 py-4 bg-white border-b border-[#E7E7E7]",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:()=>j(-1),className:"p-2 -ml-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:s.jsx("path",{d:"M15 18L9 12L15 6",stroke:"#111111",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),s.jsx("h1",{className:"text-[18px] font-bold text-[#111111]",children:"í™”ìƒ ì„¸ì…˜ ì—°ê²° í™•ì¸"}),s.jsx("button",{onClick:()=>B(!q),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(c,{className:"w-5 h-5 text-[#606060]"})})]})}),q&&s.jsx("div",{className:"bg-white border-b border-[#E7E7E7] px-6 py-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[14px] text-[#606060] mb-2",children:"ì¹´ë©”ë¼ ì„ íƒ"}),s.jsx("select",{value:C,onChange:e=>S(e.target.value),className:"w-full px-4 py-2 border border-[#E7E7E7] rounded-lg focus:outline-none focus:border-[#4285F4]",children:D.map(e=>s.jsx("option",{value:e.deviceId,children:e.label||`ì¹´ë©”ë¼ ${e.deviceId.slice(0,5)}`},e.deviceId))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[14px] text-[#606060] mb-2",children:"ë§ˆì´í¬ ì„ íƒ"}),s.jsx("select",{value:I,onChange:e=>T(e.target.value),className:"w-full px-4 py-2 border border-[#E7E7E7] rounded-lg focus:outline-none focus:border-[#4285F4]",children:R.map(e=>s.jsx("option",{value:e.deviceId,children:e.label||`ë§ˆì´í¬ ${e.deviceId.slice(0,5)}`},e.deviceId))})]})]})}),s.jsx("div",{className:"flex-1 px-6 py-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-[20px] font-bold text-[#111111] mb-4",children:"ì¹´ë©”ë¼ ë¯¸ë¦¬ë³´ê¸°"}),s.jsxs("div",{className:"relative aspect-video bg-black rounded-[10px] overflow-hidden",children:[s.jsx("video",{ref:z,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),"idle"===f&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#111111]/80",children:s.jsxs("div",{className:"text-center",children:[s.jsx(i,{className:"w-12 h-12 text-white mb-2 mx-auto"}),s.jsx("p",{className:"text-white",children:"ì¹´ë©”ë¼ë¥¼ ì‹œì‘í•˜ë ¤ë©´ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”"})]})}),"failed"===f&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#EA4335]/90",children:s.jsxs("div",{className:"text-center",children:[s.jsx(i,{className:"w-12 h-12 text-white mb-2 mx-auto"}),s.jsx("p",{className:"text-white",children:"ì¹´ë©”ë¼ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤"})]})})]})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-[20px] font-bold text-[#111111] mb-4",children:"ì—°ê²° í…ŒìŠ¤íŠ¸"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-white rounded-[10px] p-4 border border-[#E7E7E7]",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 bg-[#FFE6E6] rounded-full flex items-center justify-center mr-3",children:s.jsx(a,{className:"w-5 h-5 text-[#EA4335]"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[14px] font-medium text-[#111111]",children:"ì¹´ë©”ë¼"}),s.jsxs("p",{className:"text-[12px] text-[#929292]",children:["idle"===f&&"ëŒ€ê¸° ì¤‘","testing"===f&&"í…ŒìŠ¤íŠ¸ ì¤‘...","success"===f&&"ì •ìƒ ì‘ë™","failed"===f&&"ì‚¬ìš© ë¶ˆê°€"]})]})]}),P(f)]})}),s.jsxs("div",{className:"bg-white rounded-[10px] p-4 border border-[#E7E7E7]",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 bg-[#E6F9F1] rounded-full flex items-center justify-center mr-3",children:s.jsx(l,{className:"w-5 h-5 text-[#00C471]"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[14px] font-medium text-[#111111]",children:"ë§ˆì´í¬"}),s.jsxs("p",{className:"text-[12px] text-[#929292]",children:["idle"===p&&"ëŒ€ê¸° ì¤‘","testing"===p&&"3ì´ˆê°„ ë§ì”€í•´ì£¼ì„¸ìš”...","success"===p&&"ì •ìƒ ì‘ë™","failed"===p&&"ì‚¬ìš© ë¶ˆê°€"]})]})]}),P(p)]}),"testing"===p&&s.jsx("div",{className:"mt-3",children:s.jsx("div",{className:"h-2 bg-[#E7E7E7] rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-[#00C471] transition-all duration-100",style:{width:100*E+"%"}})})})]}),s.jsx("div",{className:"bg-white rounded-[10px] p-4 border border-[#E7E7E7]",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 bg-[#E8F4FD] rounded-full flex items-center justify-center mr-3",children:s.jsx(n,{className:"w-5 h-5 text-[#4285F4]"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[14px] font-medium text-[#111111]",children:"ìŠ¤í”¼ì»¤"}),s.jsxs("p",{className:"text-[12px] text-[#929292]",children:["idle"===b&&"ëŒ€ê¸° ì¤‘","testing"===b&&"í…ŒìŠ¤íŠ¸ ìŒ ì¬ìƒ ì¤‘...","success"===b&&"ì •ìƒ ì‘ë™","failed"===b&&"ì‚¬ìš© ë¶ˆê°€"]})]})]}),P(b)]})}),s.jsx("div",{className:"bg-white rounded-[10px] p-4 border border-[#E7E7E7]",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 bg-[#FFF5E6] rounded-full flex items-center justify-center mr-3",children:"failed"===w?s.jsx(r,{className:"w-5 h-5 text-[#FFA500]"}):s.jsx(d,{className:"w-5 h-5 text-[#FFA500]"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[14px] font-medium text-[#111111]",children:"ì¸í„°ë„·"}),s.jsxs("p",{className:"text-[12px] text-[#929292]",children:["idle"===w&&"ëŒ€ê¸° ì¤‘","testing"===w&&"ì†ë„ ì¸¡ì • ì¤‘...","success"===w&&`${k?.toFixed(1)} Mbps`,"failed"===w&&"ì†ë„ ë¶€ì¡±"]})]})]}),P(w)]})})]}),s.jsx("div",{className:"mt-6 p-4 bg-[#F8F9FA] rounded-[10px]",children:s.jsx("p",{className:"text-[13px] text-[#606060]",children:"ğŸ’¡ í™”ìƒ í†µí™”ë¥¼ ìœ„í•´ì„œëŠ” ìµœì†Œ 2Mbps ì´ìƒì˜ ì¸í„°ë„· ì†ë„ê°€ í•„ìš”í•©ë‹ˆë‹¤. ëª¨ë“  í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•´ì•¼ ì›í™œí•œ í™”ìƒ í†µí™”ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤."})})]})]})}),s.jsx("div",{className:"px-6 pb-8",children:s.jsx("div",{className:"max-w-md mx-auto",children:"idle"===f&&"idle"===p&&"idle"===b&&"idle"===w?s.jsxs(t,{onClick:G,className:"w-full",variant:"primary",children:[s.jsx(o,{className:"w-5 h-5 mr-2"}),"ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹œì‘"]}):V?s.jsx(t,{onClick:()=>j("/session/video-room"),className:"w-full",variant:"success",children:"í™”ìƒ ì„¸ì…˜ ì‹œì‘í•˜ê¸°"}):s.jsxs("div",{className:"space-y-3",children:[s.jsx(t,{onClick:G,className:"w-full",variant:"secondary",children:"ë‹¤ì‹œ í…ŒìŠ¤íŠ¸"}),("testing"===f||"testing"===p||"testing"===b||"testing"===w)&&s.jsx("p",{className:"text-center text-[14px] text-[#929292]",children:"í…ŒìŠ¤íŠ¸ ì§„í–‰ ì¤‘... ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”"})]})})})]})})}export{j as default};
