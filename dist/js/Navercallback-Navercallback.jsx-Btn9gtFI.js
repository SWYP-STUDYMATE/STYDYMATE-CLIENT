import{b as e,z as t}from"./vendor-chunk-D6LsFSV7.js";import{a,u as s}from"../assets/index-Cy6KDqhv.js";import{u as r}from"./react-vendor-chunk-CMkIwBz9.js";import"./ui-vendor-chunk-CYPVLLJ1.js";import"./utils-vendor-chunk-Clitctyl.js";function o(){const[o,c]=e.useState("네이버 로그인 처리 중..."),n=r();return e.useEffect(()=>{const e=new URLSearchParams(window.location.search),t=e.get("code"),r=e.get("state"),o=e.get("error"),i=e.get("error_description");if(o)c("네이버 로그인 실패: "+(i||o));else if(t&&r){(async()=>{try{const o=`/login/oauth2/code/naver?code=${t}&state=${r}`,i=await a.get(o);if(i.data&&i.data.accessToken&&i.data.refreshToken){localStorage.setItem("accessToken",i.data.accessToken),localStorage.setItem("refreshToken",i.data.refreshToken),i.data.name&&localStorage.setItem("userName",i.data.name),void 0!==i.data.isNewUser&&localStorage.setItem("isNewUser",String(i.data.isNewUser));try{const e=await a.get("/user/name");(0,s.getState().setName)(e.data.name)}catch(e){}c("네이버 로그인 성공! 메인 페이지로 이동합니다..."),setTimeout(()=>{n("/agreement",{replace:!0})},2e3)}else c("토큰을 받아오지 못했습니다.")}catch(e){c("토큰 요청 실패: "+(e.response?.data?.message||e.message)),setTimeout(()=>{n("/",{replace:!0})},3e3)}})()}},[n]),t.jsx("div",{className:"flex flex-col items-center justify-center h-screen bg-[#FFFFFF] w-[768px] mx-auto",children:t.jsx("h2",{className:"text-2xl font-bold mb-4",children:o})})}export{o as default};
