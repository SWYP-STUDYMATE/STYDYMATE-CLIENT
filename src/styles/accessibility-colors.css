/* ===== WCAG 접근성 준수 색상 시스템 ===== */

/* WCAG AA/AAA 대비율 기준:
 * AA: 텍스트 4.5:1, 대형 텍스트 3:1, UI 요소 3:1
 * AAA: 텍스트 7:1, 대형 텍스트 4.5:1
 */

:root {
  /* 고대비 텍스트 색상 */
  --text-primary-high-contrast: #000000; /* AAA: 21:1 대비율 */
  --text-secondary-high-contrast: #333333; /* AAA: 12.6:1 대비율 */
  --text-tertiary-high-contrast: #4A4A4A; /* AA: 7.1:1 대비율 */
  
  /* 링크 색상 개선 */
  --link-default: #0D47A1; /* AAA: 8.2:1 대비율 */
  --link-hover: #1565C0; /* AAA: 7.1:1 대비율 */
  --link-visited: #4A148C; /* AAA: 9.8:1 대비율 */
  --link-active: #B71C1C; /* AAA: 7.4:1 대비율 */
  
  /* 상태 색상 개선 */
  --success-high-contrast: #1B5E20; /* AAA: 8.9:1 대비율 */
  --error-high-contrast: #B71C1C; /* AAA: 7.4:1 대비율 */
  --warning-high-contrast: #E65100; /* AA: 5.1:1 대비율 */
  --info-high-contrast: #0D47A1; /* AAA: 8.2:1 대비율 */
  
  /* 버튼 색상 개선 */
  --btn-primary-bg: #2E7D32; /* 흰색 텍스트와 AAA: 7.9:1 */
  --btn-primary-hover: #1B5E20; /* 흰색 텍스트와 AAA: 11.2:1 */
  --btn-secondary-bg: #37474F; /* 흰색 텍스트와 AAA: 9.8:1 */
  --btn-secondary-hover: #263238; /* 흰색 텍스트와 AAA: 13.4:1 */
  
  /* 포커스 상태 색상 */
  --focus-ring: #1976D2; /* AA: 5.9:1 대비율 */
  --focus-ring-dark: #0D47A1; /* AAA: 8.2:1 대비율 */
  
  /* 배경 색상 개선 */
  --bg-subtle: #F8F9FA; /* 텍스트와 충분한 대비 보장 */
  --bg-muted: #E1F5FE; /* 정보성 배경 */
  --bg-success: #E8F5E8; /* 성공 배경 */
  --bg-error: #FFEBEE; /* 에러 배경 */
  --bg-warning: #FFF3E0; /* 경고 배경 */
}

/* ===== 고대비 모드 지원 ===== */
@media (prefers-contrast: high) {
  :root {
    /* 고대비 모드에서는 더욱 극명한 대비 사용 */
    --text-primary: var(--text-primary-high-contrast);
    --text-secondary: var(--text-secondary-high-contrast);
    --link-color: var(--link-default);
    --green-500: var(--success-high-contrast);
    --red: var(--error-high-contrast);
    --blue: var(--info-high-contrast);
    --warning-yellow: var(--warning-high-contrast);
    
    /* 경계선 강화 */
    --border-default: #000000;
    --border-light: #666666;
  }
  
  /* 버튼 고대비 스타일 */
  .btn-primary {
    background-color: var(--btn-primary-bg) !important;
    color: #FFFFFF !important;
    border: 2px solid var(--btn-primary-bg) !important;
  }
  
  .btn-primary:hover {
    background-color: var(--btn-primary-hover) !important;
    border-color: var(--btn-primary-hover) !important;
  }
  
  .btn-secondary {
    background-color: var(--btn-secondary-bg) !important;
    color: #FFFFFF !important;
    border: 2px solid var(--btn-secondary-bg) !important;
  }
  
  .btn-secondary:hover {
    background-color: var(--btn-secondary-hover) !important;
    border-color: var(--btn-secondary-hover) !important;
  }
  
  /* 링크 고대비 스타일 */
  a, .link {
    color: var(--link-default) !important;
    text-decoration: underline !important;
  }
  
  a:hover, .link:hover {
    color: var(--link-hover) !important;
    text-decoration: underline !important;
  }
  
  a:visited, .link:visited {
    color: var(--link-visited) !important;
  }
  
  /* 폼 요소 고대비 스타일 */
  input, textarea, select {
    border: 2px solid var(--text-primary-high-contrast) !important;
    color: var(--text-primary-high-contrast) !important;
  }
  
  input:focus, textarea:focus, select:focus {
    border-color: var(--focus-ring-dark) !important;
    box-shadow: 0 0 0 3px rgba(13, 71, 161, 0.3) !important;
  }
}

/* ===== 접근성 텍스트 유틸리티 클래스 ===== */
.text-high-contrast {
  color: var(--text-primary-high-contrast);
}

.text-aa-compliant {
  color: var(--text-tertiary-high-contrast);
}

.text-aaa-compliant {
  color: var(--text-secondary-high-contrast);
}

.link-accessible {
  color: var(--link-default);
  text-decoration: underline;
  text-underline-offset: 2px;
}

.link-accessible:hover {
  color: var(--link-hover);
}

.link-accessible:visited {
  color: var(--link-visited);
}

.link-accessible:focus {
  outline: 2px solid var(--focus-ring-dark);
  outline-offset: 2px;
}

/* ===== 상태별 색상 유틸리티 ===== */
.text-success-accessible {
  color: var(--success-high-contrast);
}

.text-error-accessible {
  color: var(--error-high-contrast);
}

.text-warning-accessible {
  color: var(--warning-high-contrast);
}

.text-info-accessible {
  color: var(--info-high-contrast);
}

/* 배경 색상과 함께 사용할 때 */
.bg-success-accessible {
  background-color: var(--bg-success);
  color: var(--success-high-contrast);
}

.bg-error-accessible {
  background-color: var(--bg-error);
  color: var(--error-high-contrast);
}

.bg-warning-accessible {
  background-color: var(--bg-warning);
  color: var(--warning-high-contrast);
}

.bg-info-accessible {
  background-color: var(--bg-muted);
  color: var(--info-high-contrast);
}

/* ===== 다크모드 접근성 지원 ===== */
@media (prefers-color-scheme: dark) {
  :root {
    /* 다크모드에서의 고대비 색상 */
    --text-primary-high-contrast: #FFFFFF;
    --text-secondary-high-contrast: #E0E0E0;
    --text-tertiary-high-contrast: #BDBDBD;
    
    --link-default: #90CAF9; /* 다크 배경에서 AAA: 7.1:1 */
    --link-hover: #BBDEFB; /* 다크 배경에서 AA: 5.2:1 */
    --link-visited: #CE93D8; /* 다크 배경에서 AA: 4.8:1 */
    
    --success-high-contrast: #A5D6A7; /* 다크 배경에서 AA: 4.9:1 */
    --error-high-contrast: #EF9A9A; /* 다크 배경에서 AA: 4.7:1 */
    --warning-high-contrast: #FFCC02; /* 다크 배경에서 AAA: 9.6:1 */
    --info-high-contrast: #90CAF9; /* 다크 배경에서 AAA: 7.1:1 */
    
    --focus-ring: #90CAF9;
    --focus-ring-dark: #BBDEFB;
  }
}

/* ===== 색맹 지원을 위한 패턴 ===== */
.colorblind-friendly {
  /* 색상뿐만 아니라 패턴이나 모양도 함께 사용 */
}

.success-indicator::before {
  content: '✓ ';
  font-weight: bold;
}

.error-indicator::before {
  content: '✗ ';
  font-weight: bold;
}

.warning-indicator::before {
  content: '⚠ ';
  font-weight: bold;
}

.info-indicator::before {
  content: 'ℹ ';
  font-weight: bold;
}